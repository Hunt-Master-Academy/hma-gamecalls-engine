╔══════════════════════════════════════════════════════════════════════════════════════════════════╗
║                        Huntmaster Audio Engine - Component Testing                              ║
╚══════════════════════════════════════════════════════════════════════════════════════════════════╝

[0;34m[INFO][0m Component: engine
[0;34m[INFO][0m Verbose: true
[0;34m[INFO][0m Stress Test: false
[0;34m[INFO][0m Memory Check: false

[0;34m[INFO][0m Testing UnifiedAudioEngine Core...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[0;36m[TEST][0m Basic engine instantiation and session management
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Running main() from /mnt/e/develop/Huntmaster/huntmaster-engine/build/_deps/googletest-src/googletest/src/gtest_main.cc
[==========] Running 9 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 9 tests from UnifiedEngineTest
[ RUN      ] UnifiedEngineTest.SessionCreationAndDestruction
[TestPaths] Initialized:
  Project root: "/mnt/e/develop/Huntmaster/huntmaster-engine"
  Data root: "/mnt/e/develop/Huntmaster/huntmaster-engine/data"
  Temp root: "/tmp/huntmaster_test_1753356068379"
[       OK ] UnifiedEngineTest.SessionCreationAndDestruction (55 ms)
[ RUN      ] UnifiedEngineTest.PerSessionMasterCallLoading
[       OK ] UnifiedEngineTest.PerSessionMasterCallLoading (3 ms)
[ RUN      ] UnifiedEngineTest.ConcurrentSessionOperations
[       OK ] UnifiedEngineTest.ConcurrentSessionOperations (4 ms)
[ RUN      ] UnifiedEngineTest.SessionIsolation
[       OK ] UnifiedEngineTest.SessionIsolation (0 ms)
[ RUN      ] UnifiedEngineTest.InvalidSessionHandling
[       OK ] UnifiedEngineTest.InvalidSessionHandling (0 ms)
[ RUN      ] UnifiedEngineTest.ResultPatternConsistency
[       OK ] UnifiedEngineTest.ResultPatternConsistency (2 ms)
[ RUN      ] UnifiedEngineTest.LegacyMigrationPattern
[       OK ] UnifiedEngineTest.LegacyMigrationPattern (4 ms)
[ RUN      ] UnifiedEngineTest.SessionResetFunctionalityTest
/mnt/e/develop/Huntmaster/huntmaster-engine/tests/unit/test_unified_engine.cpp:332: Skipped
Master call file not available, skipping reset test

[  SKIPPED ] UnifiedEngineTest.SessionResetFunctionalityTest (1 ms)
[ RUN      ] UnifiedEngineTest.CanProcessAudioFiles
/mnt/e/develop/Huntmaster/huntmaster-engine/tests/unit/test_unified_engine.cpp:402: Skipped
Master call file not found: "/mnt/e/develop/Huntmaster/huntmaster-engine/data/master_calls/buck_grunt.wav"

[  SKIPPED ] UnifiedEngineTest.CanProcessAudioFiles (2 ms)
[----------] 9 tests from UnifiedEngineTest (74 ms total)

[----------] Global test environment tear-down
[==========] 9 tests from 1 test suite ran. (75 ms total)
[  PASSED  ] 7 tests.
[  SKIPPED ] 2 tests, listed below:
[  SKIPPED ] UnifiedEngineTest.SessionResetFunctionalityTest
[  SKIPPED ] UnifiedEngineTest.CanProcessAudioFiles
[0;32m[✓][0m Engine Creation completed successfully (.125134577s)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[0;36m[TEST][0m Engine processing with master call audio data
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[TestPaths] Initialized:
  Project root: "/mnt/e/develop/Huntmaster/huntmaster-engine"
  Data root: "/mnt/e/develop/Huntmaster/huntmaster-engine/data"
  Temp root: "/tmp/huntmaster_test_1753356068456"
=== DTW Debug Test ===
Validating inputs...
✅ Audio file found: data/master_calls/buck_grunt.wav
✅ Master call ID: buck_grunt
✅ Session created with ID: 1
Loading master call 'buck_grunt': SUCCESS
Loading audio file: data/master_calls/buck_grunt.wav
Audio info: 7488 samples, 22050Hz, 1 channels, 0.340s
⚠️  WARNING: Audio sample rate (22050Hz) doesn't match session (44100Hz)
This may cause feature extraction issues.

Testing chunk processing with 1024 samples:
  Processed 8 chunks, 7488 samples total
  Features extracted: 35
  Similarity score: 0.751321

Testing chunk processing with 512 samples:
  Processed 15 chunks, 7488 samples total
  Features extracted: 42
  Similarity score: 0.752571

Testing chunk processing with entire file:
  Processed 1 chunks, 7488 samples total
  Features extracted: 28
  Similarity score: 0.750227

Processing for main session...
Current master call: buck_grunt
Processing audio chunk (7488 samples): SUCCESS
Session feature count: 28
Similarity score: 0.750227

=== ANALYSIS ===
File: data/master_calls/buck_grunt.wav
Expected features: 42
Actual features: 28
Difference: -14

=== ADDITIONAL DIAGNOSTICS ===
Detailed scoring available:
  MFCC score: 1.000000
  Volume score: 0.501132
  Timing score: 0.500000
  Confidence: 0.000000
  Samples analyzed: 7488
  Is reliable: No
  Is match: Yes
Session duration: 0.098000 seconds
[0;32m[✓][0m Engine Audio Processing (Master) completed successfully (.143990292s)
[0;34m[INFO][0m Testing engine with different user recording conditions...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[0;36m[TEST][0m Standard user attempt vs master call comparison
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[TestPaths] Initialized:
  Project root: "/mnt/e/develop/Huntmaster/huntmaster-engine"
  Data root: "/mnt/e/develop/Huntmaster/huntmaster-engine/data"
  Temp root: "/tmp/huntmaster_test_1753356068603"
=== DTW Debug Test ===
Validating inputs...
✅ Audio file found: data/recordings/user_attempt_buck_grunt.wav
✅ Master call ID: buck_grunt
✅ Session created with ID: 1
Loading master call 'buck_grunt': SUCCESS
Loading audio file: data/recordings/user_attempt_buck_grunt.wav
Audio info: 94128 samples, 44100Hz, 2 channels, 2.134s

Testing chunk processing with 1024 samples:
  Processed 92 chunks, 94128 samples total
  Features extracted: 457
  Similarity score: 0.151348

Testing chunk processing with 512 samples:
  Processed 184 chunks, 94128 samples total
  Features extracted: 549
  Similarity score: 0.152331

Testing chunk processing with entire file:
  Processed 1 chunks, 94128 samples total
  Features extracted: 366
  Similarity score: 0.150026

Processing for main session...
Current master call: buck_grunt
Processing audio chunk (94128 samples): SUCCESS
Session feature count: 366
Similarity score: 0.150026

=== ANALYSIS ===
File: data/recordings/user_attempt_buck_grunt.wav
Expected features: 42
Actual features: 366
Difference: 324

=== ADDITIONAL DIAGNOSTICS ===
Detailed scoring available:
  MFCC score: 0.000000
  Volume score: 0.500131
  Timing score: 0.000000
  Confidence: 0.000000
  Samples analyzed: 94128
  Is reliable: No
  Is match: Yes
Session duration: 4.107000 seconds
[0;32m[✓][0m Baseline User Recording completed successfully (4.161621693s)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[0;36m[TEST][0m User recording with silence gaps - VAD and timing analysis
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[TestPaths] Initialized:
  Project root: "/mnt/e/develop/Huntmaster/huntmaster-engine"
  Data root: "/mnt/e/develop/Huntmaster/huntmaster-engine/data"
  Temp root: "/tmp/huntmaster_test_1753356072764"
=== DTW Debug Test ===
Validating inputs...
✅ Audio file found: data/recordings/user_attempt_buck_grunt_gap.wav
✅ Master call ID: buck_grunt
✅ Session created with ID: 1
Loading master call 'buck_grunt': SUCCESS
Loading audio file: data/recordings/user_attempt_buck_grunt_gap.wav
Audio info: 275724 samples, 44100Hz, 2 channels, 6.252s

Testing chunk processing with 1024 samples:
  Processed 270 chunks, 275724 samples total
  Features extracted: 1345
  Similarity score: 0.152410

Testing chunk processing with 512 samples:
  Processed 539 chunks, 275724 samples total
  Features extracted: 1614
  Similarity score: 0.153745

Testing chunk processing with entire file:
  Processed 1 chunks, 275724 samples total
  Features extracted: 1076
  Similarity score: 0.150016

Processing for main session...
Current master call: buck_grunt
Processing audio chunk (275724 samples): SUCCESS
Session feature count: 1076
Similarity score: 0.150016

=== ANALYSIS ===
File: data/recordings/user_attempt_buck_grunt_gap.wav
Expected features: 42
Actual features: 1076
Difference: 1034

=== ADDITIONAL DIAGNOSTICS ===
Detailed scoring available:
  MFCC score: 0.000000
  Volume score: 0.500080
  Timing score: 0.000000
  Confidence: 0.000000
  Samples analyzed: 275724
  Is reliable: No
  Is match: Yes
Session duration: 31.583000 seconds
[0;32m[✓][0m Gap Handling Test completed successfully (31.630276770s)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[0;36m[TEST][0m User recording with low volume - amplitude sensitivity test
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[TestPaths] Initialized:
  Project root: "/mnt/e/develop/Huntmaster/huntmaster-engine"
  Data root: "/mnt/e/develop/Huntmaster/huntmaster-engine/data"
  Temp root: "/tmp/huntmaster_test_1753356104399"
=== DTW Debug Test ===
Validating inputs...
✅ Audio file found: data/recordings/user_attempt_buck_grunt_lowvolume.wav
✅ Master call ID: buck_grunt
✅ Session created with ID: 1
Loading master call 'buck_grunt': SUCCESS
Loading audio file: data/recordings/user_attempt_buck_grunt_lowvolume.wav
Audio info: 124764 samples, 44100Hz, 2 channels, 2.829s

Testing chunk processing with 1024 samples:
  Processed 122 chunks, 124764 samples total
  Features extracted: 607
  Similarity score: 0.151546

Testing chunk processing with 512 samples:
  Processed 244 chunks, 124764 samples total
  Features extracted: 729
  Similarity score: 0.152701

Testing chunk processing with entire file:
  Processed 1 chunks, 124764 samples total
  Features extracted: 486
  Similarity score: 0.150019

Processing for main session...
Current master call: buck_grunt
Processing audio chunk (124764 samples): SUCCESS
Session feature count: 486
Similarity score: 0.150019

=== ANALYSIS ===
File: data/recordings/user_attempt_buck_grunt_lowvolume.wav
Expected features: 42
Actual features: 486
Difference: 444

=== ADDITIONAL DIAGNOSTICS ===
Detailed scoring available:
  MFCC score: 0.000000
  Volume score: 0.500093
  Timing score: 0.000000
  Confidence: 0.000000
  Samples analyzed: 124764
  Is reliable: No
  Is match: Yes
Session duration: 6.667000 seconds
[0;32m[✓][0m Low Volume Handling completed successfully (6.715664504s)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[0;36m[TEST][0m User recording without gaps - continuous audio processing
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[TestPaths] Initialized:
  Project root: "/mnt/e/develop/Huntmaster/huntmaster-engine"
  Data root: "/mnt/e/develop/Huntmaster/huntmaster-engine/data"
  Temp root: "/tmp/huntmaster_test_1753356111118"
=== DTW Debug Test ===
Validating inputs...
✅ Audio file found: data/recordings/user_attempt_buck_grunt_nogap.wav
✅ Master call ID: buck_grunt
✅ Session created with ID: 1
Loading master call 'buck_grunt': SUCCESS
Loading audio file: data/recordings/user_attempt_buck_grunt_nogap.wav
Audio info: 94128 samples, 44100Hz, 2 channels, 2.134s

Testing chunk processing with 1024 samples:
  Processed 92 chunks, 94128 samples total
  Features extracted: 457
  Similarity score: 0.151348

Testing chunk processing with 512 samples:
  Processed 184 chunks, 94128 samples total
  Features extracted: 549
  Similarity score: 0.152331

Testing chunk processing with entire file:
  Processed 1 chunks, 94128 samples total
  Features extracted: 366
  Similarity score: 0.150026

Processing for main session...
Current master call: buck_grunt
Processing audio chunk (94128 samples): SUCCESS
Session feature count: 366
Similarity score: 0.150026

=== ANALYSIS ===
File: data/recordings/user_attempt_buck_grunt_nogap.wav
Expected features: 42
Actual features: 366
Difference: 324

=== ADDITIONAL DIAGNOSTICS ===
Detailed scoring available:
  MFCC score: 0.000000
  Volume score: 0.500131
  Timing score: 0.000000
  Confidence: 0.000000
  Samples analyzed: 94128
  Is reliable: No
  Is match: Yes
Session duration: 4.146000 seconds
[0;32m[✓][0m Continuous Audio Test completed successfully (4.193482147s)

[0;32m[✓][0m Component testing completed successfully!
